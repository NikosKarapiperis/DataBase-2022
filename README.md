# DataBase-2022
This is a project i had to implement in the course of Databases[2021-2022]. I had to use mySQL in order to create database for the management of car workshops.

 Η παρούσα αναφορά αποτελεί μέρος της 2ης εργασίας στο μάθημα “Βάσεις Δεδομένων” του τμήματος Πληροφορικής και Τηλεματικής του Χαροκόπειου Πανεπιστημίου, για το ακαδημαϊκό έτος 2021-22.  
 
 
 
1.	Εντολές δημιουργίας σχήματος 
 
 
 
    Η λογική που ακολουθήσαμε ώστε να δημιουργηθεί σωστά ολόκληρο το σχήμα είναι η εξής :   Πρέπει πρώτα να δημιουργηθούν οι πίνακες , οι οποίοι δεν έχουν ξένα κλειδιά , τα οποία να δείχνουν σε πρωτεύοντα κλειδιά άλλων πινάκων. Αυτό συμβαίνει γιατί , σε διαφορετική περίπτωση , θα είχαμε σφάλματα κατά την εισαγωγή τιμών, γιατί δεν θα μπορούσαμε να εισάγουμε την τιμή του ξένου κλειδιού , χωρίς να υπάρχει ο πίνακας στον οποίο αναφέρεται το συγκεκριμένο κλειδί. 
 
Ένα παράδειγμα στο δικό μας σχήμα είναι η σχέση μεταξύ των πινάκων (REPAIR_STATION , ENGINEER , REPAIR_PLATFORM). 
Στην συγκεκριμένη περίπτωση , πρέπει πρώτα να δημιουργηθεί ο πίνακας  REPAIR_STATION και ο πίνακας ENGINEER , ώστε να υπάρχει ένα τουλάχιστον συνεργείο , στο οποίο ανήκουν οι 5 πλατφόρμες , δηλαδή το ξένο κλειδί στον πίνακα REPAIR_PLATFORM , το οποίο ονομάσαμε Station_id , να μπορεί να αναφερθεί σε υπάρχον πρωτεύον κλειδί του πίνακα REPAIR_STATION(id). Επίσης , πρέπει πρώτα να δημιουργηθεί ο πίνακας ENGINEER , καθώς ο πίνακας REPAIR_STATION , περιέχει ένα ακόμη ξένο κλειδί , το οποίο δείχνει στον πίνακα ENGINEER.Οπότε πρέπει πρώτα να υπάρχει κάποιος μηχανικός , ώστε να μην υπάρξει παραβίαση του ξένου κλειδιού. 
 
 
 
 
 
 
 
Με αυτή την λογική αποφασίσαμε να δημιουργήσουμε το σχήμα μας με την εξής σειρά :  
 
1.Πρώτα δημιουργήσαμε τον πίνακα REPAIR_STATION , ο οποίος δεν περιέχει κάποιο ξένο κλειδί, παρά μόνο το πρωτεύον κλειδί του(id). 
2.Στην συνέχεια δημιουργήσαμε τον πίνακα ENGINEER , , ο οποίος δεν περιέχει κάποιο ξένο κλειδί, παρά μόνο το πρωτεύον κλειδί του(id). 
3.Τρίτο δημιουργήσαμε τον πίνακα VEHICLE ,  ο οποίος δεν περιέχει κάποιο ξένο κλειδί, παρά μόνο το πρωτεύον κλειδί του(Licence_plate). 
4.Έπειτα , δημιουργήσαμε τον πίνακα REPAIR_TASK_TYPE , ο οποίος δεν περιέχει κάποιο ξένο κλειδί, παρά μόνο το πρωτεύον κλειδί του(id). 
5.Πέμπτος δημιουργήθηκε ο πίνακας REPAIR_PLATFORM , o οποίος περιέχει το πρωτεύον κλειδί του(id) , και δύο ξένα κλειδιά προς τους πίνακες REPAIR_STATION και ENGINEER , γι’ αυτόν τον λόγο και δημιουργήθηκε μετά από αυτούς. 
6.Έκτος δημιουργήθηκε ο πίνακας REPAIR_PARTS , o οποίος περιέχει το πρωτεύον κλειδί του(Part_id) και ένα ξένο κλειδί(RepairStationId) , το οποίο δείχνει προς τον πίνακα REPAIR_STATION , γι’ αυτόν τον λόγο και δημιουργήθηκε μετά τον πίνακα 
REPAIR_STATION(πρέπει να υπάρχει ο πίνακας στον οποίο δείχνει το ξένο κλειδί , αλλιώς θα έχουμε παραβίαση του FOREIGN CONSTRAINT). 
7.Έβδομος δημιουργήθηκε ο πίνακας ENG_WORKS_PLATFORM , ο οποίος δημιουργήθηκε από την σχέση Ν:M , η οποία όπως γνωρίζουμε από την θεωρία μας δίνει νέα σχέση , η οποία περιέχει ως ξένα κλειδιά , τα πρωτεύοντα κλειδιά των 2 προηγούμενων σχέσεων. Στην συγκεκριμένη περίπτωση , η σχέση περιέχει 2 ξένα κλειδιά , τα οποία δείχνουν στους πίνακες , REPAIR_PLATFORM και ENGINEER. Ο συνδυασμός των 2 κλειδιών είναι το πρωτεύον κλειδί της σχέσης. 
8.Όγδοος δημιουργήθηκε ο πίνακας PLAT_HOST_CAR ,  ο οποίος δημιουργήθηκε από την σχέση Ν:M , η οποία όπως γνωρίζουμε από την θεωρία μας δίνει νέα σχέση , η οποία περιέχει ως ξένα κλειδιά , τα πρωτεύοντα κλειδιά των 2 προηγούμενων σχέσεων ΚΑΙ επίσης σε αυτήν την σχέση εντάσσεται και το γνώρισμα της συσχέτισης(DateTime). Στην συγκεκριμένη περίπτωση , η σχέση περιέχει 2 ξένα κλειδιά , τα οποία δείχνουν στους πίνακες , REPAIR_PLATFORM και VEHICLE. Ο συνδυασμός των 2 κλειδιών είναι το πρωτεύον κλειδί της σχέσης. 
9.Ένατος δημιουργήθηκε ο πίνακας TASKEXECUTEVEHICLE , ο οποίος δημιουργήθηκε από την σχέση Ν:M , η οποία όπως γνωρίζουμε από την θεωρία μας δίνει νέα σχέση , η οποία περιέχει ως ξένα κλειδιά , τα πρωτεύοντα κλειδιά των 2 προηγούμενων σχέσεων ΚΑΙ επίσης εντάσσονται σε αυτή την νέα σχέση και τα γνωρίσματα της συσχέτισης(Description,DateTime,TaskUnits,UseSpareParts). Στην συγκεκριμένη περίπτωση , η σχέση περιέχει 2 ξένα κλειδιά , τα οποία δείχνουν στους πίνακες , REPAIR_TASK_TYPE και VEHICLE. Ο συνδυασμός των 2 κλειδιών είναι το πρωτεύον κλειδί της σχέσης. 
10.Τέλος , δέκατος δημιουργήθηκε ο πίνακας ENGPERFORMTASK , ο οποίος δημιουργήθηκε από την σχέση Ν:M , η οποία όπως γνωρίζουμε από την θεωρία μας δίνει νέα σχέση , η οποία περιέχει ως ξένα κλειδιά , τα πρωτεύοντα κλειδιά των 2 προηγούμενων σχέσεων. Στην συγκεκριμένη περίπτωση , η σχέση περιέχει 2 ξένα κλειδιά , τα οποία δείχνουν στους πίνακες , ENGINEER και REPAIR_TASK_TYPE. Ο συνδυασμός των 2 κλειδιών είναι το πρωτεύον κλειδί της σχέσης. 
  
 
 
 
 
 
 
 
2.	Εισαγωγή δεδομένων 
 
Πρώτα πρέπει να εισάγουμε τουλάχιστον ένα συνεργείο , γιατί αλλιώς δεν θα μπορούμε να εισάγουμε τις 5 πλατφόρμες . Αυτό συμβαίνει γιατί , η σχέση REPAIR_PLATFORM περιέχει 2 ξένα κλειδιά(Station_id , Engineer_id) και για να συμπληρωθούν αυτά τα 2 πεδία κατά την εισαγωγή μιας πλατφόρμας  , πρέπει πρώτα να έχουμε εισάγει τουλάχιστον ένα REPAIR_STATION και ένα ENGINEER. Στην συγκεκριμένη περίπτωση , βάλαμε ένα συνεργείο με πρωτεύον κλειδί(id=1) , οπότε το ξένο κλειδί της σχέσης REPAIR_PLATFORM(Station_id) , θα έχει την τιμή 1 ώστε να δείξουμε ότι οι 5 αυτές πλατφόρμες ανήκουν στο συνεργείο 1.Στην συνέχεια , στο ξένο κλειδί Engineer_id , το οποίο δείχνει στον πίνακα ENGINEER , βάλαμε προς το παρών την τιμή null , εφόσον δεν είχαμε εισάγει κάποιον μηχανικό και για να μην παραβιαστεί το FOREIGN CONSTRAINT. Τέλος στο πεδίο photo , εισάγαμε την τιμή null αφού η φωτογραφία του χώρου είναι προαιρετική. 
 
Έπειτα , εισάγαμε 10 μηχανικούς , ο καθένας με ξεχωριστό id αφού το συγκεκριμένο πεδίο είναι το primary key του πίνακα. Τώρα πλέον αφού υπάρχουν και οι καταχωρήσεις τον μηχανικών , μπορούμε μέσω της εντολής UPDATE , να αλλάξουμε τις τιμές στον πίνακα REPAIR_PLATFORM , στο ξένο κλειδί(Engineer_id) και από null , να εισαχθούν τα id των μηχανικών , οι οποίοι είναι αρχιμηχανικοί στην εκάστοτε πλατφόρμα. 
 
Στην συνέχεια , εισάγουμε 10 οχήματα , το καθένα με ξεχωριστό Licence_plate αφού το συγκεκριμένο πεδίο είναι το primary key του πίνακα. 
 
Μετέπειτα , εισάγουμε 5 τύπους εργασίας ,  ο καθένας με ξεχωριστό id αφού το συγκεκριμένο πεδίο είναι το primary key του πίνακα. 
 
Τέλος , εισάγουμε 10 ανταλλακτικά ,  το καθένα με ξεχωριστό Part_id αφού το συγκεκριμένο πεδίο είναι το primary key του πίνακα. Επίσης συμπληρώσαμε το πεδίο RepairStationId με 1 αφού το συγκεκριμένο γνώρισμα είναι το ξένο κλειδί της σχέσης , το οποίο δείχνει στον πίνακα REPAIR_STATION και αφού έχουμε εισάγει μόνο ένα συνεργείο με id=1 , η μόνη τιμή ώστε να μην παραβιαστεί το FOREIGN CONSTRAINT και για να δείξουμε ότι αυτά τα ανταλλακτικά , ανήκουν στο συνεργείο που έχουμε εισάγει , είναι το 1. 
 
 
 
3. Εντολές διαγραφής σχήματος. 

Για να διαγράψουμε ολόκληρο το σχήμα μας , πρέπει να διαγράψουμε τους πίνακες με την αντίστροφη σειρά απ’ ότι τους φτιάξαμε. Αυτό συμβαίνει καθώς , δεν μπορούμε να διαγράψουμε έναν πίνακα στον οποίο υπάρχει ξένο κλειδί , ενός άλλου πίνακα , το οποίο δείχνει σε αυτόν . Για παράδειγμα , δεν μπορούμε να διαγράψουμε την σχέση REPAIR_STATION , χωρίς προηγουμένως να έχουμε σβήσει όσους πίνακες δείχνουν σε αυτόν,  δηλαδή (REPAIR_PLATFORM,REPAIR_PARTS). 
